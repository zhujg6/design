<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--页面自动刷新60秒一次 -->
    <meta http-equiv="refresh" content="300">
    <title>沃云统一资源管理视图</title>
    <script type="text/javascript" src="js/jquery-1.11.3.min.js" ></script>
    <link href="echarts/doc/asset/css/font-awesome.min.css" rel="stylesheet">
    <link href="echarts/doc/asset/css/carousel.css" rel="stylesheet">
    <script src="echarts/doc/asset/js/codemirror.js"></script>
    <script src="echarts/doc/asset/js/javascript.js"></script>

    <link href="echarts/doc/asset/css/codemirror.css" rel="stylesheet">
    <link href="echarts/doc/asset/css/monokai.css" rel="stylesheet">
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- 可选的Bootstrap主题文件（一般不用引入） -->
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
     <script src="js/map.js"></script>
    <script src="js/vm.js"></script>
    <script src="js/resources.js"></script>
    <script src="js/custResource.js"></script>
    <script src="js/jquery.bootstrap.newsbox.js"></script>
	<script src="js/bootstrap.min.js"></script>
    <script src="js/echarts.js" type="text/javascript"></script>
    <script src="js/pools.js"></script>

</head>

<body style="background-color: #000000">

<div class="container-fluid" style="background-color: #000000">
    <div class="row" style="position:relative">
        <div class="col-md-7">
            <div class="text-left" >
                <div id="main" class="left" ></div>
            </div>
        </div>
        <div class="col-md-5 ">
            <div class="row">
                <div class="" style="height: 300px;margin-top:25%;margin-left: 15%" >
                    <!--<div id="customer1" class="main"></div>-->
                    <div class="text-center" style="color: white" >
                        <input type="radio" name="a" value="resources" onclick="getPage('res')" checked/>资源概况
                        <input type="radio" name="a" style="margin-left: 5%" value="cust" onclick="getPage('cust')"/>客户信息
                   		<!--  <a href="#" id="tabBut" onclick="closeTab()">关闭</a>-->
                    </div>
                    <div id="mainRes"  style="color: white;margin-top: 10%" >

                        <h3>公有云资源总体使用情况</h3>
                          <div class="row" style="margin-top: 5%">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <div class="row">
                                    <div class="col-md-3">
                                        VCPU(核):
                                    </div>
                                    <div class="col-md-4 ">
                                        总量：<span class="resource" name="tcpu">2539</span>;</div>
                                    <div class="col-md-5">已使用：<span class="resource" name="cpu">1465</span>
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 4%">
                                    <div class="col-md-3">
                                        VMEM(G):
                                    </div>
                                    <div class="col-md-4 ">
                                        总量：<span class="resource" name="tmem">7364</span>;

                                    </div>
                                    <div class="col-md-5">
                                        已使用：<span class="resource" name="mem">3495</span>
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 4%">
                                    <div class="col-md-3">
                                        存储(T):
                                    </div>
                                    <div class="col-md-4 resource">
                                        总量：<span class="resource" name="tstorage">90</span>;</div>
                                    <div class="col-md-5">已使用：<span class="resource" name="storage">30</span>
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 4%">
                                    <div class="col-md-3">
                                        IP:
                                    </div>
                                    <div class="col-md-4 resource">
                                        总量：<span class="resource" name="tip">759</span>;</div>
                                    <div class="col-md-5">已使用：<span class="resource" name="ip">400</span>
                                    </div>
                                </div>
                            </div>
                        </div>            
                    </div>
                    <div id="custDiv" style="margin-top: 10%;">
                        <div class="row">
                            <div class="" style="height: 240px">
                                <div id="customer" class="main"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		<div class="col-md-12"  >
			<div class="row" >
				<div class="col-md-1"></div>
				<div class="col-md-10" style="height: 200px;" id="ringTab">
						<div class="col-md-12" style="background:#5f0646;height:160px;position:absolute;top:0px;margin-left:-15px;border-radius:16px;opacity: 0.6;"></div>
						<div id="resources1" class="main" style="margin-top: 25px"></div>
				</div>

				<div class="col-md-1"></div>
                <!--<div class="text-center" style="color: white" id="custTab">
                    <table id="custList" class="table-bordered" style="width: 70%;margin-top:20px">
                        <tr>
                            <td name="custName">企业名称</td>
                            <td name="cpu">vCPU核</td>
                            <td name="mem">内存(G)</td>
                            <td name="ebs">数据盘(G)</td>
                            <td name="vm">虚拟机数量</td>
                            <td name="lb">LB数量</td>
                            <td name="route">vRouter数量</td>
                            <td name="bw">带宽容量(M)</td>
                        </tr>
                        <tbody></tbody>
                    </table>                    
                </div>-->
			</div>

		</div>
    </div>
	

</div>





<script type="text/javascript">
    //获取屏幕分辨率
    var height = screen.height;
    var width = screen.width;

    document.getElementById("main").style.height = (height-350) + "px";
    document.getElementById("resources1").style.height = '100%';
    document.getElementById("customer").style.height = '100%';

</script>
<script type="text/javascript">
    var infoList =[];
    // 路径配置
    require.config({
        paths: {
            echarts: 'echarts/build/dist'
        }
    });

    //默认选择总量，取数组的最后一个
    function drawCharts(ec){
        drawMap(ec);
		if(infoList.length>0){
			DrawColumnEChart(ec,infoList[infoList.length-1]);
            DrawCustomer(ec,infoList[infoList.length-1]);
		}else{
			  DrawColumnEChart(ec);
              DrawCustomer(ec);
		}
      
    }

function selectedGeoCoord(){
	
}
function getInfoList () {
	$.ajax({
				"url" : "/portal/pr/client?p=/queryResourcePoolInfo",
				"type" : "POST",
				"dataType" : "json",
				"async" : false,
				"success" : function(result) {
					infoList = result.data;
					$.each(infoList,function(index,value){
						if(value.name!="总量"){
							value.name=pools[value.name];
						}
					});
				},
				"error" : function(msg) {
					//console.info(msg);
				}		
			});
   
}

    $(function(){
	    //初始化数据
	    getInfoList();
        $('#custTab').hide();
        $('#custDiv').hide();
		$("input[type='radio'][value='resources']").click();
		//$("input[type='radio'][value='cust']").click();
		//使用
        require(
                [
                    'echarts',
                    'echarts/chart/map', // 使用柱状图就加载bar模块，按需加载
                    'echarts/chart/bar',
                    'echarts/chart/pie'

                ],drawCharts
        );
        
    });
   	function closeTab(){
       $('#custTab').hide();
    }
    
    function getPage(a){
        if(a=='res'){
            $('#mainRes').show();
            $('#ringTab').show();
            $('#custDiv').hide();
            $('#custTab').hide();
            //使用
            require(
                    [
                        'echarts',
                        'echarts/chart/map', // 使用柱状图就加载bar模块，按需加载
                        'echarts/chart/bar',
                        'echarts/chart/pie'

                    ],drawCharts
            );

        }else if(a=='cust'){
            $('#mainRes').hide();
            $('#ringTab').hide();
            $('#custDiv').show();
            $('#customer').show();
            //使用
            require(
                    [
                        'echarts',
                        'echarts/chart/map', // 使用柱状图就加载bar模块，按需加载
                        'echarts/chart/bar',
                        'echarts/chart/pie'

                    ],drawCharts
            );

        }
    }
</script>

</body>
</html>
